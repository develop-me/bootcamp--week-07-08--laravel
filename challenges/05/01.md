# Setting up your owners model, and a one-to-many relationship

1. Create a new Owner model by using the appropriate `artisan` command. You'll need a migration too so be sure to include the `-m` part.

    REMEMBER: both uppercase first letter and class name being singular are important in your Model name.

1. Populate your `create_owners_table` migration file with fields for:
    - `name` - the owner's name
    - `address` - where they live

1. Run your migration.

1. Use `artisan tinker` to make your first owner. Test you can see it with `Owner::all();`

1. You'll then need to create another modify migration for your animals table e.g. by running:
    `artisan make:migration modify_animals_add_foreign_key`.

1. create a foreign key with this migration by adding an `owner_id` to the animal table:
    ```php
    // create the owner_id column
    $table->bigInteger("owner_id")->unsigned()->default(1);

    // set up the foreign key constraint
    $table->foreign("owner_id")->references("id")->on("animals")->onDelete("cascade");
    ```

1. Run the migration

1. Write and test the rollback with `artisan migrate:rollback --step=1`. For the rollback (`drop()`) you'll need to drop (remove) foreign key relationship first, then remove the field:
    ```php
    $table->dropForeign('owner_id');
    $table->dropColumn('owner_id');
    ```

1. Now add the Eloquent relationships so the Owner and Animal Models have the correct relationship.

    You'll need to:
    
        - add an `owner()` method to your Animal model with `belongsTo()` (refer to notes)

        - add `animals()` method to your Owner model with `hasMany()`

1. Now use `artisan tinker` to add a new owner, then a new animal that belongs to this owner (owner id 2?)

1. Test getting this animal with `$animal = Animal::find({new animal id})` and then $animal->owner; to see if the two are "linked", do you see the owner properties?
# Day 2: Afternoon

## TDD

- Write our tests *first*
- Write failing test first, then write code to make it work. Then write next test.
- Red, Green, Refactor
    - Red: write the test - what does it need to do?
    - Green: smallest bit of code to get it working - how are we going to do it?
    - Refactor: tidy up code
- If we're doing it properly, should never write a new line of code without first having a test for it
- Guarantees that if we make changes and all the tests pass it definitely still does what we think
- Freedom to make changes without worrying about breaking things
- If you find a bug, add a new test

### FizzBuzz

- new `App\FizzBuzz` class
- `aritsan make:test FizzBuzzTest --unit`
- Add `testForNumber` tests

    ```php
    $fizzbuzz = new FizzBuzz();
    $this->assertSame("1", $fizzbuzz->forNumber(1));
    ```

- **RUN TESTS AT EVERY STAGE**
- Add empty method to `FizzBuzz`
- *Run tests*: red
- Just return `1`: *smallest* bit of code to get it working
- *Run tests*
- Might seem silly, but it's all that was necessary to pass the test. If we want more functionality we need more tests
- Add test for `2` - run tests, fix, run tests
- Add test for `3` - run tests, fix, run tests
- Add test for `4` - run tests, fix, run tests
- Add test for `5` - run tests, fix, run tests
- Add test for `6` - run tests, fix, run tests - **don't be tempted to use modulus on `5`** - not a test for it!
- Don't have to test *all* values, skip to relevant ones
- Add test for `10` - run tests, fix, run tests
- Add test for `15` - run tests, fix, run tests
- Now, refactor


### Git Hooks

- Hooks let us intercept bit of life-cycle
- Live in `.git/hooks` - not part of the repo
- `pre-commit`: Non-zero exit code won't let us commit
- Create `pre-commit` hook

    ```bash
    #!/bin/bash

    vendor/bin/phpunit --filter Unit
    ```

- `chmod +x .git/hooks/pre-commit`
- Mention `git bisect`

# Day 2: Morning

## Structure of Day
- Laravel
- Homestead (setup a Vagrant box for Laravel + tools)
- Blade templating
- Routes
- Models & Eloquent

## Setup
- Going to set up a Laravel app boilerplate (template) and build it out into 2 apps
- I'm going to build a blog app for demonstration
- You're going to build an app for a Vets practice
- Mention `composer global require laravel/installer` run once - refer to notes

### Demo

- Update `.env`:

    ```
    DB_DATABASE=homestead
    DB_USERNAME=root
    DB_PASSWORD=secret
    ```

- Get vagrant box up and running: set memory to `512`
- `vagrant up`
- http://homestead.test
- What is Laravel?
- MVC
- compare to other stack: e.g. WordPress, backend, frontend, database, templates, data structures, logic, WP has REST API, can use headless with /wp-json/
- Why not Node?
- Introduce https://laravel.com/docs/6.x/
- What is Homestead

## Exercise 01

## Blade Basics
- introduction: how we make our views
    - PHP templating provided with Laravel
        - PHP and HTML files
        - mix of static and dynamic
    - `.blade.php` file extension
    - typically stored in the `resources/views` directory or sub-folders
    - https://laravel.com/docs/6.x/blade is docs resource to use
- Demo homepage setup and updating route

## Routes
- Routing turns an HTTP request into some running code
- Live in the `routes` directory

## Demo
- Add a `GET` route `routes/web.php` for about page
- Add new Blade template for that route

## Exercise 02

## Blade Features: Extending a Master template to create a Child layout
- so far we could build out a static site with Laravel, pretty boring, not using power of the framework
- [`@extends`](https://laravel.com/docs/6.x/blade#extending-a-layout)

## Demo
- Create about child layout, extend

## Exercise 03

##Â Talk
- [`@section` directive](https://laravel.com/docs/6.x/blade#defining-a-layout): defines a section of content
- [`@yield` directive](https://laravel.com/docs/6.x/blade#defining-a-layout) - used to display the contents of a given section

## Demo
- `@yield('title')` in master
- `@section('title', 'About Us')` in child
- show content changed for about title, but homepage blank
- show setting default or fallback

## Exercise 04

## Demo
- use `@section` not `@yield` for blocks of HTML (instead of string/text)
- `@section('content')` & `@show` in master
- `@section('content')` & `@endsection` in child

## Exercise 05

## Blade Features: Partials

- Now want to add link to nav
- [Partials/`@include`](https://laravel.com/docs/6.x/blade#including-subviews)

## Demo

- show making new folder for partials and using `@include('_parts/nav')`

## Exercise 06

## Control Structures

- [if statements](https://laravel.com/docs/6.x/blade#if-statements)

## Demo

In `nav.blade.php`:

@if (Request::is('/'))
    btn-primary
@endif

## Exercise 07

## Demo
- Show shorthand:
    `{{ Request::is('about') ? 'btn-primary' : '' }}`

## Eloquent ORM
- Going to store animals, owners etc. in database
- Need to setup database tables
- Way to read/write to database
- Show `artisan`: **run on box** with `vagrant ssh` then `cd code`

## Database Migrations
- How to version databas structure: database dumps?
- Migrations solve: version controllable
- Create `Article` model and migration:
    `artisan make:model Article -m`
- Explain `up()` and `down()` methods
- Write article migration
- Run article migration: `artisan migrate`
- Check database
- Explain rollback: `artisan migrate:rollback` discuss "steps": `artisan migrate:rollback --step=1`
- Write rollback and demo

## Exercise 08

## Adding columns
- additional migration, don't change current one
- demo `artisan make:migration modify_articles_table`
- add column
- test migration
- rollback

## Exercise 09

## Altering columns

- Doctrine DBAL library is used to determine the current state of the column and create the SQL queries needed to make the required adjustments
- `composer require doctrine/dbal`
- make new migration
    ```php
    Schema::table('articles', function (Blueprint $table) {
        $table->string('name', 150)->change();
    });
    ```

## Exercise 10
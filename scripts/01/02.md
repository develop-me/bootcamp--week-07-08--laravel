# Day 2: Afternoon

## Basic API

### Routing
- `api` routes

### Controller
- Explain what controllers are
- Use `artisan` to make a controller - with `--api` option: `artisan make:controller Articles --api`
    - Creates a `class`, thus uppercase 'A'
    - Explain why plural
- Show the `Articles` controller
- Add `use App\Article` at top to make Article model available
- Write `store()`
- Explain the Request object: dump a `$request->all()` (with `ddd()`)
- Use the `Article::create()` method and return it
- Whatever we return gets turned into JSON
- Mass assignment vulnerability: add `$fillable` property
- Make request in Postman
- Add `GET` list request
- Add `GET` with URL parameter request: explain URL parameters
- Switch routes to use a `prefix` group
- Add `PUT` request: use `$article->fill($data)->save()`
- Add `DELETE` request: return a `response(null, 204)`
- Show `artisan route:list` for viewing all routes and associated models/controllers


## Resources
- Don't want to return all of the data
- `artisan make:resource ArticleResource`
- Update the `toArray()` method: `id`, `title`, `article`
- Add `use App\Http\Resources\ArticleResource` to `Articles`
- Add it to responses
- Don't need full article when listing all of them
- `artisan make:resource ArticleListResource`
- Update the `toArray()` method: `id`, `title`
- Add `use App\Http\Resources\ArticleListResource`
- Add `::collection()` to `index()`


## CORS
- Cross-Origin Resource Sharing
- `composer require barryvdh/laravel-cors`
- Publish: `php artisan vendor:publish --provider="Barryvdh\Cors\ServiceProvider"`
- Add provider to `config/app.php`: `Barryvdh\Cors\ServiceProvider::class,`
- Add middleware to `app/Http/Kernel.php`:`\Barryvdh\Cors\HandleCors::class,`

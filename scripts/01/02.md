# Day 2: Afternoon

## Basic API

- Routes go in `api`
- Use `artisan` to make a controller - with `--api` option: `artisan make:controller API\\Articles --api`
- Show the `Articles` controller
- Add `use App\Article` at top to make Article model available
- Add `GET` list request
- Whatever we return gets turned into JSON
- Make request in Postman
- Add `GET` with route model binding
- Add `DELETE` request: return a `response(null, 204)`
- Double check `Article` has `$fillable` properties set
- Add `POST`: `Article::create()`
- Add `PUT` request: use `$article->fill($data)->save()`
- Show `artisan route:list` for viewing all routes and associated models/controllers

## Validation

- Basically same as before
- Copy across into API
- Authenticate to true
- Update API controller

## Resources
- Don't want to return all of the data
- `artisan make:resource API\\ArticleResource`
- Update the `toArray()` method: `id`, `title`, `article`
- Add `use App\Http\Resources\API\ArticleResource` to `Articles`
- Add it to responses
- Don't need full article when listing all of them
- `artisan make:resource API\\ArticleListResource`
- Update the `toArray()` method: `id`, `title`
- Add `use App\Http\Resources\API\ArticleListResource`
- Add `::collection()` to `index()`


## CORS
- Cross-Origin Resource Sharing
- `composer require barryvdh/laravel-cors`
- Publish: `php artisan vendor:publish --provider="Barryvdh\Cors\ServiceProvider"`
- Add provider to `config/app.php`: `Barryvdh\Cors\ServiceProvider::class,`
- Add middleware to `app/Http/Kernel.php`:`\Barryvdh\Cors\HandleCors::class,`
